# About

This monorepo contains all the code for the ionos-wordpress project.

It enables developers to maintain all of our IONOS WordPress hosting related plugin at a single place.

## Philosophy

- Self contained

  Repository contains all the code, configuration and tool needed to maintain our IONOS WordPress Hosting specific plugins.

  Event the tooling and it's configuration is integrated in the repository. Tools are either declared as dependencies or using a containerized approach.

  Once you've checked out the repository everything is in it's place and you can immediately start working. There is just a mininmal set of [Requirements](#requirements) to be installed on your machine.

- Cross platform

  The repository is designed to work on major operating systems. It uses a containerized approach to run native tools and services.

- Mono structure

  The repository is organized as [Monorepo](https://en.wikipedia.org/wiki/Monorepo) to maintain various sub projects in a single place.

  This allows to share code and configuration between the sub projects and to maintain a single version for all of them.

- Local first

  The repository is designed to work [locally first](https://dev.to/alexanderop/what-is-local-first-web-development-3mnd). It uses a containerized approach to run native tools and services.

  This allows to work on the code and configuration locally and to test it in a local environment before pushing it to a remote repository.

# Development

The repository contains all the code, configuration and tools needed to maintain our IONOS WordPress Hosting specific artifacts.

The repository provides

- automatic [@wordpress/env](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-env/) provisioning and configuration for WordPress autocompletion and PHP debugging

- `vscode` configuration and settings so that all required plugins and settings are automatically installed and configured

## Directory layout

- The top level directory contains configuration files

  - `pnpm-workspace.yaml` is used to configure where [pnpm](https://pnpm.io/) will find sub packages like WordPress plugins

  - `.npmrc` ist used to configure [pnpm](https://pnpm.io/) behaviour like the automatically provided NodeJS version and the package cache location.

  - `pnpm-lock.yaml` is the lock file generated by [pnpm](https://pnpm.io/).

  - `.wp-env.json` and `.wp-env-afterStart.sh` are  configuration files for the [@wordpress/env](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-env/)

  - `.editorconfig` is used to configure the code style for the repository. _This file is used by various editors and IDEs to enforce the code style._

  - see [Customization](#customization) for details to `.env`, `.secrets` and `.env.local` files.

- Directory `packages/` contains all the sub projects  sorted by category.

  - `packages/wp-plugin/` contains WordPress plugin sub projects

  - `packages/wp-theme/` contains WordPress theme  sub projects

  - `packages/npm/` contains npm package sub projects

  - `packages/docker/` contains docker image sub projects

  - `packages/docs/` contains documentation sub projects

  - `packages/generic/` contains non specific sub packages not matching the other categories

  Not all of the package categories are required to be present in the repository. You can remove or create category directories as needed (i.e. if the first docker sub project is required, create `packages/docker` and place the docker sub project inside).

> [!IMPORTANT]
> Why are the sub projects sorted into category directories ?
> Different types of artifacts have different requirements and require a different build/release workflow. By sorting the sub projects into category directories we can provide a unified build/release workflow for all sub projects of the same category automatically.

## Requirements

- `vscode`

  Actually vscode is _not really_ required but it makes working with the repository much easier.

  _You can use [DevContainer](https://containers.dev/) even on other IDEs like PHPStorm but this repository takes only care for `vscode` for now._

- a modern `docker` version (including `docker compose` sub command)

- `git` for doing version control and managing the repository

All other tools are located in a [DevContainer](https://containers.dev/) providing a unified development experience across all platforms.

> [!TIP]
> The [DevContainer](https://containers.dev/) is automatically started when you open the repository in vscode. Our [DevContainer](https://containers.dev/) provides tools like `pnpm`, `bash` and all other native tools required for maintaing the software artifacts located in this repository.

## Toolchain

Software detailed here will be automatically provided in the project specfic [DevContainer](https://containers.dev/).

- [pnpm](https://pnpm.io/) is used as package manager in favor of npm because of it's excellent monorepo support plus

  - it's much faster than npm and yarn

  - it caches once downloaded packages and reuses them across projects

  - it uses hard links to save disk space

  - it computes sub project dependencies for free

  - manages NodeJS provisioning automatically

- `bash`, `jq` and friends

  We need shell and some shell commands to implement workflows and scripts.

## Setup

- checkout the repository

- open the repository in `vscode`

`vscode` will now install the extensions and automatically start the [DevContainer](https://containers.dev/) providing the whole toolchain.

## Commands

@TODO: continue documentation here

## Workflows

@TODO: Git Flow vs trunk based development

#### Changeset

- Create a release

- Create a feature

### Git

## Customization

### Environment

### Secrets

## CI/CD

The [DevContainer](https://containers.dev/) of this repository will also be used by the CI/CD pipeline to ensure exactly the same development environment for both local development, CI/CD and release.

### Workflows
